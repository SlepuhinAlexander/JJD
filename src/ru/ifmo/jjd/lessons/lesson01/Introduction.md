## Введение в Java

### Платформа Java

Язык программирования Java существует довольно давно и со временем из языка программирования вырос в целую платформу 
Java. Платформа Java - это набор программ, облегчающих разработку, отладку и запуск программ, написанных на Java.  
Платформа Java влючает:
- Собственно язык программирования Java
- **JVM** (Java Virtual Machine) - виртуальная машина Java, обеспечивающая кросс-платформенный запуск программ, 
    написанных на Java;
- **JRE** (Java Runtime Environment) - среда выполнения программ на Java. Обеспечивается JVM;
- **Инструменты для разработки**: компилятор, инетрпретатор, отладчик, генератор документации;
- **API** (Application Programming Interface) - обширный набор готовых библиотек для решение типовых задач.

Виды платформ Java:
- **Java Card** - для смарт-карт (самый ограниченный набор);
- **Java ME** (Micro Edition) - для мобильных устройств, приборов, техники;
- **Java SE** (Standard Edition) - полный пакет платформы Java; стандартный выбор для работы с Java в небольших 
    проектах.
- **Java EE** (Enterprise Edition) - расширенный пакет платформы Java; является Java SE, дополненный библиотеками для 
    коммерческих приложений. Повсеместно используется в коммерческом программировании на Java.
- **Java FX** - ранее, отдельный пакет библиотек для построения пользовательского интерфейса. С версии Java 8 входит в 
    Java SE по умолчанию.
    
Стандартная платформа Java SE поставляется в двух вариантах:
- **JRE** (Java Runtime Environment) - среда выполнения программ на Java. Состоит из JVM (Java Virtual Machine) и библиотек 
    стандартных классов Java.
- **JDK** (Java Development Kit) - набор для разработки на Java. Состоит из, собственно JRE и инструментария разработчика: 
    компилятора, отладчика и т.д.

### JVM (Java Virtual Machine)

Язык Java *кросс-платформенный*. Это значит, что программа, написанная на Java, будет одинаково корректно работать на 
любых устроствах, любых операционных системах и т.д., если для них реализована и установлена JVM - виртуальная машина 
Java.

**JVM** (Java Virtual Machine) - это программа, являющаяся прослойкой между операционной системой устройства и программой 
на Java. JVM - это виртуальная (существующая только в оперативной памяти устройства) среда, в которой исполняется 
Java-программа.   
Компилятор Java осуществаляет "перевод" кода программы Java в так называемый байт-код Java - набор последовательных 
инструкций для программы. Байт-код не зависит от платформы, на которой компилируется Java-программа, он будет одинаков. 
JVM, в свою очередь, осуществляет "перевод" инструкций байт-кода Java в инструкции операционной системы конкретной 
платформы.  
В конечном счёте, способы хранения данных, управления оперативной памятью, последовательность выполняемых инструкций на 
конкретном устройстве - зависит от конкретной JVM, реализованной для данного устройства. В то время как исходный 
Java-код будет одинаков. 

Реализованы версии JVM для всех существующих операционных систем.

### Трансляция, компиляция, интерпретация.

Язык Java является *компилируемым интерпретируемым* языком программирования. Разберёмся, что это значит.

**Трансляция** программы - это преобразование программы, составленной на одном из языков программирования, в программу 
на другом языке. Язык, на котором составлена программа называется **исходным языком**, а программа - **исходным кодом**.
Язык, на который осуществляется преобразование называется **целевым яызком**, а результирующая программа - **объектным 
кодом**.

При трансляции программы адресатом может быть:
- конкретное устройство - процессор. Тогда трансляция называется **компиляцией**;
- другая программа - интерпретатор. Тогда трансляция называется **интерпретацией**.

Достоинства компиляции:
- Более высокая производительность, эффективность;
- Доступ к низкоуровневым ресурсам устройства. Позволяет использовать эти ресурсы наиболее эффективно;
- Восстановление исходного кода из скомпилированного - долгая, трудоёмкая задача.

Недостатки компиляции:
- Плохая переносимость, зависимость исходного кода программы от целевой платформы;
- Небезопасность.

Достоинства интерпретации:
- Кросс-платформенность (независимость от платформы);
- Возможность использования динамической типизации;
- Возможность использования рефлексии;
- Сравнительно небольшой и более понятный исходный код программы.

Недостатки интерпретации:
- Более низкая производительность, более долгое исполнение программы;
- Незащищённость текста исходного кода программы;
- Уязвимость к инъекции кода.

Java использует и компилятор, и инерпретатор, сочетая преимущества обоих подходов.    
С точки зрения разработки язык является *компилируемым*: для того чтобы запустить программу, её необходимо 
скомпилировать. В результате компиляции программа транслируется в платформо-независимый байт-код Java.  
С точки зрения целевой платформы (процессора) язык является *интерпретируемым*, т.к. байт-код не может быть выполнен 
напрямую. JRE выполняет байт-код и динамически транслирует его в коды процессора. 

### Структура исходного кода программы на Java

Программы на Java всегда состоят из **классов**. Класс - это логически связанный набор *данных* и *методов* для 
манипуляций с этими данными.  
Каждый класс *располагается в отдельном файле* с расширением `.java`, имя которого *должно совпадать* с именем класса.
  
Для возможности запуска программы, она должна иметь **точку входа** с которой нужно *начать* выполнение программы. 
Точка входа - это метод `main()` в одном из классов программы.  
Метод `main()` может содержать: 
- непосредственные инструкции для работы программы;
- инструкции по созданию экземпляров классов программы (**объектов**);
- инструкции вызова методов различных объектов и классов;
- и т.д.

Таким образом, исходный код *минимальной* программы на Java состоит из одного `.java` файла, содержащего один *класс*, 
в котором объявлен один метод `main()`, содержаший все инструкции работы программы.

**Инструкция (statement)** - основной "строительный блок" программы на Java. Инструкция содержит указание, что именно 
должна сделать программа на текущем шаге своей работы. Все инструкции выполняются последовательно, "сверху вниз".  
Каждая инструкия выполняет некоторое действие, например:
- объявление переменной (возможно, с присвоением значения);
- присвоение (нового) зачения переменной;
- вычисление какого-нибудь выражения, с присвоением результата переменной;
- вызов метода;
- и т.п.

**Завершение инструкции** в исходном коде обозначается символом точка с запятой `;`. Данный знак указывает компилятору 
на конец инструкции (следовательно, дальнейший текст программы - начало следующей инструкции).  
Компилятор *игнорирует* любые символы форматирования исходного кода: дополнительные пробелы, табуляцию, переносы строк. 
Поэтому разраничение инструкций через `;` строго обзательны.  
Форматирование исходного кода нужно для его читаемости: удобства чтения программистом. Для этих целей принято каждую 
новую инструкцию писать *с новой строки*.

Пример инструкции:

    System.out.println("Вывод в консоль");

вызов метода `System.out.println` для печати в консоль программы - строки, переданной в это метод.

Другой пример:

    short a = 2;
    
объявление новой переменной `a`, с типом данных `short`, и присвоение ей начального значения 2.

Минимальная программа на Java:

    // ClassName.java
    public class ClassName {
        public static void main(String[] args) {
            /*
             * <набор инструкций для работы программы>
             */
        }
    }

### Выполнение программы на Java

1. *Сохранение*: исходный код программы сохраняется в файлах с раширением `.java`;
2. *Компиляция*: компилятор проверяет исходный код на синтаксические ошибки и, если их нет, генерирует соответствующие 
классам исходного кода файлы *байт-кода* с расширением `.class`;
3. *Выполнение*: запуск JVM и запуск байт-кода программы в JVM.

JVM начинает с загрузки главного класса (класса, содержащего точку входа - метод `main()`) в оперативную память. Для 
этого используется программа под названием **загрузчик классов** (class loader). Если в процессе выполнения программы 
потребуется использование других классов, загрузчик классов динамически их подгружает в память перед тем как программа 
будет их использовать. 

После загрузки класса (классов) JVM исользует программу под названием **контролёр байткода** (bytecode verifier) для 
проверки правильности байт-кода и проверки, что байт-код не нарушает ограничения безопасности Java.

В отличие от физического устройства, *виртуальная машина Java* - это программа, интерпретирующая отдельные инструкции 
байт-кода Java в машинные коды. Инструкции проверяются и интерпретируются последовательно, по одной за раз, а не вся 
программа сразу. Каждый шаг немедленно выполняется после трансляции.  
Если инструкция не прошла проверку, то выбрасывается **исключение** - особый тип объекта в Java, сигнализирующий о 
нештатном или небезопасном поведении программы. Если *исключение* не *обработано* особым образом, то выполнение 
программы прерывается.