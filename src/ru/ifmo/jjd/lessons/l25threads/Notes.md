## Многопоточность

При запуске программы создаётся процесс выполнения инструкций, строчка за строчкой.
Выполняются они в основном потоке исполнения - в потоке main.

При необходимости, можно создать раздельные, независимые друг от друга побочные потоки выполнения.
Инструкции, принадлежащие каждому из потоков, будут выполняться в соответствующем потоке независимо друг от друга, и, 
в идеале, параллельно друг другу.

Одно ядро в процессоре может использовать только один поток.
Если множество потоков будет выполняться на одном ядре, будет псевдо-параллелизм, то JVM будет переключать время 
выполнения между потоками, по возможности.
Но в единый момент времени на одном ядре будет выполняться один поток.

Выполнение потоков параллельно и независимо.
Основной поток может завершиться раньше, чем остальные, выполнение программы при этом не закончится.
Программа будет работать до завершения всех потоков.
Основной поток отличается только тем, что запускается первым, и тем, что остальные потоки порождаются в основном.
Хотя это не обязательно, любой поток может породить другой поток. Иерархии наследования нет, все потоки в этом смысле 
"одинаковые".


У каждого потока **свой** стек вызовов, но куча - всегда **одна на всех**.
Поэтому все потоки работают с одними и теми же объектами. Независимо. Параллельно.
Поэтому нужно всегда внимательно следить за тем какое состояние объектов и локальных переменных.

### Жизненный цикл потока
1. NEW - поток создан, не запускался, не готов к запуску. Происходит, когда создан объект типа Thread (или наследник).
1. поток готов к работе, но не запускался ещё. Происходит, когда вызван метод start().
1. RUNNABLE - поток запущен. Определяет этот момент шедулер, управлять моментом запуска нельзя.
1. non-runnable - поток не запущен: запустился, поработал, находится в состоянии ожидания.  
    Поток не ещё закончил работу, приостановлен, ожидает благоприятных условий для продолжения работы.
    1. TIME WAITING - поток был приостановлен на какое-то время (методом sleep()).
    2. WAITING - поток был приостановлен (методом wait()).
    3. BLOCKED - поток заблокирован по какой-то причине.
1. TERMINATED - поток завершил работу.

### Приоритеты потока
У каждого потока есть свой приоритет (число).
Шедулер составляет расписание запуска потока с учётом приоритетов.
Но приоритет имеет рекомендательный характер для шедулера: установка даже максимального приоритета не гарантирует, что 
этот поток будет запущен первым.

Приоритет не может быть больше максимального приоритета группы.

### Остановка (прерывание) потоков

Случаи остановки потоков:
1. поток выполнил все инструкции и остановился, потому что делать ему больше нечего.
2. в процессе работы потока было выброшено необработанное исключение или ошибка.
3. остановилась JVM.
4. если поток был daemon-потоком, и все не-daemon потоки завершили свою работу.

Метода, который останавливает поток - нет.
Программно прервать поток нельзя.